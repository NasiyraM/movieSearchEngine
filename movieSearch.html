<html lang="en">
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript">
        // confirm document is ready
        $(document).ready(function () {
            console.log("ready!");
        
        var movieList = document.getElementById('movieList');
        var button = document.getElementById("getMovie"); 
        var movieBody = document.getElementById('movieBody');
        var oneMovie = document.getElementById('getOneMovie');
        var batBody = document.getElementById('batman');
        
        var movieSelection = document.getElementById('movieSelection').value;
        var submitButton = document.getElementById('submitButton')

        // Get series of movies/series
        button.addEventListener('click', function() {
            var apiKey = 'b829fc58';
            $.get(`https://www.omdbapi.com/?apikey=${apiKey}&type=series&s=cosby`, function (data) {
            
            for (let i = 0; i < data.Search.length; i++) {
                   
                    var title = data.Search[i].Title;
                    var year = data.Search[i].Year;
                    var imdbID = data.Search[i].imdbID;
                    var poster = data.Search[i].Poster;
                    var movieContainer = document.createElement('div');
                    // using template literal to append items
                    var movieInfo = 
                    `<div>
                        <p>${title}, ${year}, ${imdbID}</p>
                        <img src="${poster}">
                    </div>
                    
                    `
                    movieContainer.innerHTML = movieInfo;
                    console.log(movieInfo);
                    movieBody.appendChild(movieContainer);
                }
                
            });
        })

        // Batman as single item searched
        oneMovie.addEventListener('click', function() {
            var apiKey = 'b829fc58';
            $.get(`https://www.omdbapi.com/?apikey=${apiKey}&type=movie&s=batman`, function (data) {
                console.log(data.Search.length);
                // Get random movie
                var batmanMovie = data.Search[Math.floor(Math.random() * data.Search.length)]; 
                var batTitle = batmanMovie.Title;
                var batYear = batmanMovie.Year;
                var batimdbID = batmanMovie.imdbID;
                var batPoster = batmanMovie.Poster;
                var batContainer = document.createElement('div');
                
                var batInfo = 
                `<div>
                    <p>${batTitle}, ${batYear}, ${batimdbID}</p>
                    <img src="${batPoster}">
                </div> 
                `
                batContainer.innerHTML = batInfo;
                batBody.appendChild(batContainer);
            });
        })
//Search movie titles
        submitButton.addEventListener('click', function() {
            var movieSelection = document.getElementById('movieSelection').value;
            console.log(movieSelection);
            
            var apiKey = 'b829fc58';
            $.get(`https://www.omdbapi.com/?apikey=${apiKey}&type=movie&s=${movieSelection}`, function (data) {
                console.log(data);
                
                for (let i = 0; i < data.Search.length; i++) {
                   
                   var title = data.Search[i].Title;
                   var year = data.Search[i].Year;
                   var imdbID = data.Search[i].imdbID;
                   var poster = data.Search[i].Poster;
                   var movieContainer = document.createElement('div');
                   // using template literal to append items
                   var movieInfo = 
                   `<div>
                       <p>${title}, ${year}, ${imdbID}</p>
                       <img src="${poster}">
                   </div>
                   
                   `
                   movieContainer.innerHTML = movieInfo;
                   console.log(movieInfo);
                   movieBody.appendChild(movieContainer);
               }
                
            })})
        
    });
     // <--- body ready
    </script>

    <title>Document</title>
</head>
<body>
    <button class="btn btn-success" id="getMovie"> Generate Movie</button>
    <div id="movieBody">
    </div>

    <br>
    <button class="btn btn-success" id="getOneMovie">One Movie</button>
    <div id="batman"></div>

    <div>
        
            <div class="form-group">
              <label for="movieSelection">Select Movie</label>
              <input type="text" class="form-control" id="movieSelection" aria-describedby="" placeholder="Enter movie choice">
            </div>
            <button type="submit" class="btn btn-primary" id="submitButton">Submit</button>
          
    </div>
    
</body>
</html>